<p class="text-success"><%= notice %></p>

<div class="row mb-4">

  <!-- Galería -->
  <div class="col-md-6">
    <% if @producto.imagenes.attached? %>
      <%= image_tag @producto.imagenes.first, class: "img-fluid mb-3 rounded" %>

      <div class="d-flex gap-2">
        <% @producto.imagenes.each do |img| %>
          <%= image_tag img, size: "80x80", class: "rounded border" %>
        <% end %>
      </div>

    <% else %>
      <%= image_tag "placeholder.png", class: "img-fluid" %>
    <% end %>

    <% if @producto.estado_fisico == "usado" && @producto.audio_muestra.attached? %>
      <h5 class="mt-4">Audio de muestra</h5>
      <audio controls>
        <source src="<%= url_for(@producto.audio_muestra) %>" />
      </audio>
    <% end %>
  </div>

  <!-- Datos -->
  <div class="col-md-6">
    <h2><%= @producto.titulo %></h2>
    <h5 class="text-muted">Artista: <%= @producto.autor %></h5>

    <p class="mt-3"><%= @producto.descripcion %></p>

    <p><strong>Género:</strong> <%= @producto.categoria %></p>
    <p><strong>Tipo:</strong> <%= @producto.tipo %></p>
    <p><strong>Estado:</strong> <%= @producto.estado %></p>

    <h4 class="text-primary mt-3">$ <%= @producto.precio %></h4>

    <p class="<%= @producto.stock > 0 ? 'text-success' : 'text-danger' %>">
      <strong>Stock:</strong> <%= @producto.stock %>
    </p>

    <%= link_to "Volver al catálogo", storefront_productos_path, class: "btn btn-secondary mt-3" %>
  </div>
</div>

<!-- Relacionados -->
<h2 class="mt-5">Discos relacionados</h2>
<%= render "related", relacionados: @relacionados %>
